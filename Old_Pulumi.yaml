name: infra-team-solution
runtime: yaml
description: Deploy the web ui resources on aws
# resources:
#   # EC2 key pair for SSH access
#   keyPair:
#     type: aws:ec2:KeyPair
#     properties:
#       keyName: infra-test
#       publicKey: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQD3F6tyPEFEzV0LX3X8BsXdMsQz1x2cEikKDEY0aIj41qgxMCP/iteneqXSIFZBp5vizPvaoIR3Um9xK7PGoW8giupGn+EPuxIA4cDM4vzOqOkiMPhz5XK0whEjkVzTo4+S0puvDZuwIsdiW9mxhJc7tgBNL0cYlWSYVkz4G/fslNfRPW5mYAM49f4fhtxPb5ok4Q2Lg9dPKVHO/Bgeu5woMc7RY0p1ej6D4CKFE6lymSDJpW0YHX/wqE9+cfEauh7xZcG0q9t2ta6F6fmX0agvpFyZo8aFbXeUBr7osSCJNgvavWbM/06niWrOvYX2xwWdhXmXSrbX8ZbabVohBK41 ofreshng@gmail.com    
#   # EC2 Security group
#   securityGroup:
#     type: aws:ec2:SecurityGroup
#     properties:
#       description: Security group for webserver with HTTP access
#       ingress:
#         - protocol: tcp
#           fromPort: 80
#           toPort: 80
#           cidrBlocks:
#             - "0.0.0.0/0"
#   # Provision an Amazon Linux EC2 instance within a public subnet of a VPC
#   webserver:
#     type: aws:ec2:Instance
#     properties:
#       ami: ami-04cb4ca688797756f
#       instanceType: t2.micro
#       tags:
#         Name: web-ui-server
#       associatePublicIpAddress: true
#       keyName: dotnet
#       vpcSecurityGroupIds:
#         - ${securityGroup.id}
#       userData: |
#         #!/bin/bash
#         sudo yum update -y
#         sudo yum install -y git
#         cd /home/ec2-user
#         git clone https://github.com/rolani/infra-team-test.git
# Export the public IP address of the webserver
# exports:
#   webserverPublicIp: ${webserver.publicIp}
# outputs:
#   webserverPublicIp: ${webserver.publicIp}

